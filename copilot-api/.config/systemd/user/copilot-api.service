[Unit]
Description=Copilot API Server
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
ExecStartPre=/bin/sh -c '[ -d /home/mkeesey/copilot-api/.git ] && git -C /home/mkeesey/copilot-api pull --ff-only || [ -d /home/mkeesey/copilot-api ] || git clone https://github.com/qike-ms/copilot-api /home/mkeesey/copilot-api'
ExecStart=/bin/sh -c 'cd /home/mkeesey/copilot-api; /home/mkeesey/.bun/bin/bun run /home/mkeesey/copilot-api/src/main.ts start'
Restart=always
RestartSec=10
Environment=NODE_ENV=production

[Install]
WantedBy=default.target
